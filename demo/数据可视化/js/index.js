define("appListPic",function(t,e,i){return'<div class="rankings-top1"><div class="content-top1"><strong>NO.1<i class="icon-flag"></i></strong> <span><a href="app/trend/{{list[0].appId}}.html"><img src="{{list[0].appIconUrl}}" width="102"></a></span><font><a href="app/trend/{{list[0].appId}}.html">{{list[0].appName}}</a></font></div><div class="number-top1"><img src="{{resourceHost+\'images/line-top3.png\'}}"> <span>{{(list[0].coverageRate*100).toFixed(2)}}%</span></div></div><div class="rankings-top2"><div class="content-top2"><strong>NO.2<i class="icon-flag"></i></strong> <span><a href="app/trend/{{list[1].appId}}.html"><img src="{{list[1].appIconUrl}}" width="76"></a></span><font><a href="app/trend/{{list[1].appId}}.html">{{list[1].appName}}</a></font></div><div class="number-top2"><img src="{{resourceHost+\'images/line-top2.png\'}}"> <span>{{(list[1].coverageRate*100).toFixed(2)}}%</span></div></div><div class="rankings-top3"><div class="content-top3"><strong>NO.3<i class="icon-flag"></i></strong> <span><a href="app/trend/{{list[2].appId}}.html"><img src="{{list[2].appIconUrl}}" width="66"></a></span><font><a href="app/trend/{{list[2].appId}}.html">{{list[2].appName}}</a></font></div><div class="number-top3"><img src="{{resourceHost+\'images/line-top3.png\'}}"> <span>{{(list[2].coverageRate*100).toFixed(2)}}%</span></div></div>'}),define("appList",function(t,e,i){return'{{each list as value i}} {{if i==0}}<li class="trans clearfix orange">{{else if i==1}}</li><li class="trans clearfix yellow">{{else if i==2}}</li><li class="trans clearfix green">{{else}}</li><li class="trans clearfix">{{/if}} <a href="app/trend/{{value.appId}}.html"><b>{{value.ranking}}</b> <em class="ellipsis" title="{{value.appName}}">{{value.appName}}</em> <span>{{(value.coverageRate*100).toFixed(2)}}%</span> <span>{{(value.activeRate*100).toFixed(2)}}%</span></a></li>{{/each}}'}),define("timeline",function(t,e,i){var a={dateLimit:{},slider:2,currPosition:0,maxPosition:0,minPosition:0,prePosition:0,min:1,max:0,dateType:"",currentDate:"",maxDate:"",minDate:"",sliderWidth:82,languages:{ch:{week:"周",month:"月",quarter:"季度"},en:{week:"Week",month:"M",quarter:"Q"}},initTimeLine:function(t){var e=this;e.dateType=t.dateType,e.dateLimit=t.dateLimit,e.language=e.languages[t.language||"ch"],e.status=t.status||window.status,"w"==e.dateType?(e.maxDate=moment(e.dateLimit.maxWeek,"YYYY-MM-DD").startOf("week").format("YYYY-MM-DD"),e.minDate=moment(e.dateLimit.minWeek,"YYYY-MM-DD").startOf("week").format("YYYY-MM-DD"),e.slider=2,e.currentDate=t.currentDate||e.maxDate,$(".time-type .weekBtn").addClass("on-choose")):"m"==e.dateType?(e.maxDate=moment(e.dateLimit.maxMonth,"YYYY-MM-DD").startOf("month").format("YYYY-MM-DD"),e.minDate=moment(e.dateLimit.minMonth,"YYYY-MM-DD").startOf("month").format("YYYY-MM-DD"),e.slider=1,e.currentDate=t.currentDate||e.maxDate,$(".time-type .monthBtn").addClass("on-choose")):"q"==e.dateType&&(e.slider=3,e.maxDate=moment(e.dateLimit.maxQ,"YYYY-MM-DD").startOf("quarter").format("YYYY-MM-DD"),e.minDate=moment(e.dateLimit.minQ,"YYYY-MM-DD").startOf("quarter").format("YYYY-MM-DD"),e.currentDate=t.currentDate||e.maxDate,$(".time-type .quarterBtn").addClass("on-choose")),e.initTimeLineStyle(),e.setTimeLineTemp(e.currentDate,0),e.setTimeDesc(),e.eventFactory()},eventFactory:function(){var t,e,i,a=this,n=!1,s=$(".contents-timeline"),o=$("#moveLeft"),r=$("#moveRight"),c=$(".time-type .weekBtn"),l=$(".time-type .monthBtn"),m=$(".time-type .quarterBtn"),d=$(".time-type span"),p=$("#timeexpl em"),u=$("#timeexpl");s.mousedown(function(e){if(n=!0,t=e.pageX,i=e.pageX,e.pageX>=$("#sliderParent").position().left&&e.pageX<=$("#sliderParent").position().left+12*a.sliderWidth&&(e.pageX<=$("#sliderParent").position().left+$("#slider").position().left||e.pageX>=$("#sliderParent").position().left+$("#slider").position().left+a.sliderWidth*a.slider)){var s=$(e.target).attr("id");if("sliderParent"===s||"timetext"===s){var o=e.pageX-$("#sliderParent").position().left,r=$("#slider").position().left,c=o-r;a.currPosition=a.currPosition+c,a.currPosition>a.maxPosition&&(a.currPosition=a.maxPosition)}}}),s.mouseup(function(t){n=!1;var s=a.currPosition-a.prePosition,o=s%(a.slider*a.sliderWidth),r=!1;i===t.pageX&&(r=!0),0===s&&0===o||(a.currPosition<a.minPosition?a.currPosition=a.minPosition:a.currPosition>a.maxPosition?a.currPosition=a.maxPosition:s<0?(r?a.currPosition=a.currPosition-(a.slider*a.sliderWidth+o):0!==o&&Math.abs(o)<a.slider*a.sliderWidth/2?a.currPosition=a.currPosition+Math.abs(o):0!==o&&Math.abs(o)>=a.slider*a.sliderWidth/2&&(a.currPosition=a.currPosition-(a.slider*a.sliderWidth+o)),e="-"):s>0&&(r?a.currPosition=a.currPosition-o:0!==o&&Math.abs(o)<a.slider*a.sliderWidth/2?a.currPosition=a.currPosition-Math.abs(o):0!==o&&Math.abs(o)>=a.slider*a.sliderWidth/2&&(a.currPosition=a.currPosition+(a.slider*a.sliderWidth-o)),e="+"),$("#slider").css("left",a.currPosition+"px"),a.prePosition=a.currPosition,a.setTimeDesc(),a.setStatus("currentDate"))}),s.mousemove(function(e){if(n){var i=e.pageX,s=i-t;t=i,a.currPosition<a.minPosition?a.currPosition=a.minPosition:a.currPosition>a.maxPosition?a.currPosition=a.maxPosition:a.currPosition=a.currPosition+s,$("#slider").css("left",a.currPosition+"px"),e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()}}),o.click(function(){var t=moment(a.currentDate,"YYYY-MM-DD"),e=moment(a.minDate,"YYYY-MM-DD");t>e&&a.moveDirection("+")}),r.click(function(){var t=moment(a.currentDate,"YYYY-MM-DD"),e=moment(a.maxDate,"YYYY-MM-DD");t<e&&a.moveDirection("-")}),c&&c.click(function(){"w"!=a.dateType&&(a.dateType="w",a.slider=2,a.maxDate=a.dateLimit.maxWeek,a.minDate=a.dateLimit.minWeek,a.currentDate=a.maxDate,a.initTimeLineStyle(),a.setTimeLineTemp(a.currentDate,0),d.removeClass("on-choose"),a.setTimeDesc(),$(this).addClass("on-choose"),a.setStatus("currentDate"))}),l&&l.click(function(){"m"!=a.dateType&&(a.dateType="m",a.slider=1,a.maxDate=a.dateLimit.maxMonth,a.minDate=a.dateLimit.minMonth,a.currentDate=a.maxDate,a.initTimeLineStyle(),a.setTimeLineTemp(a.currentDate,0),d.removeClass("on-choose"),a.setTimeDesc(),$(this).addClass("on-choose"),a.setStatus("currentDate"))}),m&&m.click(function(){"q"!=a.dateType&&(a.dateType="q",a.slider=3,a.maxDate=moment(a.dateLimit.maxQ,"YYYY-MM-DD").startOf("quarter").format("YYYY-MM-DD"),a.minDate=moment(a.dateLimit.minQ,"YYYY-MM-DD").startOf("quarter").format("YYYY-MM-DD"),a.currentDate=a.maxDate,a.initTimeLineStyle(),a.setTimeLineTemp(a.currentDate,0),a.setTimeDesc(),d.removeClass("on-choose"),$(this).addClass("on-choose"),a.setStatus("currentDate"))}),u.click(function(){$(".timeline-box .content").slideToggle("slow",function(){p.hasClass("up")?p.removeClass("up").addClass("down"):p.removeClass("down").addClass("up")})})},initTimeLineStyle:function(){var t,e=this.slider,i=e*this.sliderWidth;"w"==this.dateType?(t=e*this.sliderWidth*5,this.max=6):"m"==this.dateType?(this.max=12,t=11*e*this.sliderWidth):"q"==this.dateType&&(this.max=12,t=3*e*this.sliderWidth),this.currPosition=t,this.maxPosition=t,this.prePosition=t,$("#slider").css("width",i+"px"),$("#slider").css("left",t+"px")},moveDirection:function(t){var e;"+"===t?this.currPosition<=0?(this.currPosition=0,e=$(".contents-timeline ul li").last().attr("data-date"),this.setTimeLineTemp(e,1)):(this.currPosition=this.currPosition-this.slider*this.sliderWidth,$("#slider").css("left",this.currPosition+"px")):"-"===t&&(this.currPosition>=this.maxPosition?(this.currPosition=this.maxPosition,e=$(".contents-timeline ul li").last().attr("data-date"),this.setTimeLineTemp(e,-1)):(this.currPosition=this.currPosition+this.slider*this.sliderWidth,$("#slider").css("left",this.currPosition+"px"))),this.setTimeDesc(),this.setStatus("currentDate")},setTimeLineTemp:function(t,e){var i,a,n,s="",o=0,r=this.language;if("w"==this.dateType)for(t=moment(t,"YYYY-MM-DD").subtract("week",e).startOf("week").format("YYYY-MM-DD"),i=0,a=this.max;i<a;i++)n=moment(t,"YYYY-MM-DD"),n.format("YYYY-MM-DD")==this.minDate&&(o=(5-i)*this.slider*this.sliderWidth),s='<li class="timeline-box-li-2slider" data-date="'+n.startOf("week").format("YYYY-MM-DD")+'"><font>'+n.startOf("week").format("MM.DD")+"-"+n.endOf("week").format("MM.DD")+"</font></li>"+s,t=n.subtract("week",1).format("YYYY-MM-DD");else if("m"==this.dateType)for(t=moment(t,"YYYY-MM-DD").subtract("month",e).startOf("month").format("YYYY-MM-DD"),i=0,a=this.max;i<a;i++)n=moment(t,"YYYY-MM-DD"),n.format("YYYY-MM-DD")==this.minDate&&(o=(11-i)*this.slider*this.sliderWidth),s='<li class="timeline-box-li" data-date="'+n.startOf("month").format("YYYY-MM-DD")+'"><font>'+("01"===n.format("MM")||"12"===n.format("MM")?n.format("YYYY-MM"):n.format("MM"))+r.month+"</font></li>"+s,t=moment(t,"YYYY-MM-DD").subtract("month",1).format("YYYY-MM-DD");else if("q"==this.dateType)for(t=moment(t,"YYYY-MM-DD").endOf("quarter").format("YYYY-MM-DD"),t=moment(t,"YYYY-MM-DD").subtract("month",3*e).startOf("month").format("YYYY-MM-DD"),i=0,a=this.max;i<a;i++)n=moment(t,"YYYY-MM-DD"),n.format("YYYY-MM-DD")==this.minDate&&(o=(11-i)*this.sliderWidth),s='<li class="timeline-box-li" data-date="'+n.startOf("month").format("YYYY-MM-DD")+'"><font>'+("01"===n.format("MM")||"12"===n.format("MM")?n.format("YYYY-MM"):n.format("MM"))+r.month+"</font></li>"+s,t=moment(t,"YYYY-MM-DD").subtract("month",1).format("YYYY-MM-DD");this.minPosition=o,$(".contents-timeline ul").html(s)},getCurrValue:function(){return this.currPosition/(this.slider*this.sliderWidth)+1},setTimeDesc:function(){var t,e,i=this.getCurrValue(),a="",n=this.language,s=$(".main-box .time-span font");"w"==this.dateType?(e=$(".contents-timeline ul li:nth-child("+i+")").last().attr("data-date"),t=moment(e,"YYYY-MM-DD"),a+=t.startOf("week").format("YYYY-w")+" "+n.week+" "+t.startOf("week").format("YYYY-MM-DD")+"---"+t.endOf("week").format("YYYY-MM-DD"),this.currentDate=t.startOf("week").format("YYYY-MM-DD"),s.html(a)):"m"==this.dateType?(e=$(".contents-timeline ul li:nth-child("+i+")").last().attr("data-date"),t=moment(e,"YYYY-MM-DD"),a+=t.startOf("month").format("YYYY-MM")+" "+n.month+" "+t.startOf("month").format("YYYY-MM-DD")+"---"+t.endOf("month").format("YYYY-MM-DD"),this.currentDate=t.startOf("month").format("YYYY-MM-DD"),s.html(a)):"q"==this.dateType&&(e=$(".contents-timeline ul li:nth-child("+(3*(i-1)+1)+")").last().attr("data-date"),t=moment(e,"YYYY-MM-DD"),a+=t.startOf("quarter").format("YYYY-Q")+" "+n.quarter+" "+t.startOf("quarter").format("YYYY-MM-DD")+"---"+t.endOf("quarter").format("YYYY-MM-DD"),this.currentDate=t.startOf("quarter").format("YYYY-MM-DD"),s.html(a))},setStatus:function(t){this.status[t]=this[t]}};return a}),define("search",function(t,e,i){var a={search:function(t,e){$(t).bind("keypress",function(t){if("13"==t.keyCode){var e=$(this).val();window.location.href=projesctHost+"search.html?keyword="+e}}),$(e).click(function(){var e=$(t).val();window.location.href=projesctHost+"search.html?keyword="+e})}};return a}),define("loading",function(t,e,i){var a={loading:function(){return'<div class="loading"><div class="loading_main"><span class="loading_a">T</span><span class="loading_b">a</span><span class="loading_c">l</span><span class="loading_d">k</span><span class="loading_e">i</span><span class="loading_f">n</span><span class="loading_g">g</span><span class="loading_h">D</span><span class="loading_i">a</span><span class="loading_j">t</span><span class="loading_k">a</span></div></div>'},trendLoading:function(){return'<div class="loading"><div class="loading_main loading_trend"><span class="loading_a">T</span><span class="loading_b">a</span><span class="loading_c">l</span><span class="loading_d">k</span><span class="loading_e">i</span><span class="loading_f">n</span><span class="loading_g">g</span><span class="loading_h">D</span><span class="loading_i">a</span><span class="loading_j">t</span><span class="loading_k">a</span></div></div>'}};return a}),define("util",function(t,e,i){var a={getPromise:function(t,e,i,a){a="boolean"!=typeof a||a;var n=$.ajax({url:t,type:i||"GET",async:a,data:e,dataType:"json"});return n},mpTimeOut:function(t,e,i){return setInterval(function(){return 0===i?void(window.location.href=e):(t.html(i--),void $(".to-yizan").show())},1e3)},mpClearTimeOut:function(t){clearTimeout(t)},nav:function(t){"app"==t?$(".nav li:nth-child(2)").addClass("nav_choose"):"wxpub"==t?$(".nav li:nth-child(3)").addClass("nav_choose"):"marketprofile"==t?$(".nav li:nth-child(6)").addClass("nav_choose"):"report"==t&&$(".nav li:nth-child(5)").addClass("nav_choose")},shareWeChat:function(){$(".icon-wechat").click(function(t){$(".picShare").show(),t.stopPropagation()}),$(document).click(function(){$(".picShare").hide()})},shareBind:function(t,e,i){var a=encodeURIComponent;$(".picShare img").attr("src","http://api.bshare.cn/share/weixin?url="+a(t)+"&title="+a(e)+"&summary="+a(i)),$(".icon-sina").click(function(){window.open("http://api.bshare.cn/share/sinaminiblog?url="+a(t)+"&title="+a(e)+"&summary="+a(i))}),$(".icon-qqzone").click(function(){window.open("http://api.bshare.cn/share/qzone?url="+a(t)+"&title="+a(e)+"&summary="+a(i))})},shareReportBind:function(t,e,i){var a=encodeURIComponent;$("#jiathis_webchat img").attr("src","http://api.bshare.cn/share/weixin?url="+a(t)+"&title="+a(e)+"&summary="+a(i)),$(".icon-weixin").parent().hover(function(){$(".jiathis_weixin_modal").show()},function(){$(".jiathis_weixin_modal").hide()}),$(".icon-weibo").parent().parent().click(function(){window.open("http://api.bshare.cn/share/sinaminiblog?url="+a(t)+"&title="+a(e)+"&summary="+a(i))}),$(".icon-qqzone").parent().parent().click(function(){window.open("http://api.bshare.cn/share/qzone?url="+a(t)+"&title="+a(e)+"&summary="+a(i))})},returnTop:function(){var t='<a href="javascript:void(0)" class="toTop" id="toTop"></a>';window.TD.ui.ReturnTop("body",{html:t})},setCookie:function(t,e,i){var a=new Date;a.setDate(a.getDate()+i),document.cookie=t+"="+escape(e)+(null==i?"":";expires="+a.toGMTString())+";path=/"},getCookie:function(t){return document.cookie.length>0&&(c_start=document.cookie.indexOf(t+"="),c_start!=-1)?(c_start=c_start+t.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""}};return a}),define("config",function(t,e,i){var a={apiHost:"",getApiHost:function(){var t=window.location.href;t.indexOf("debug")!==-1?(this.apiHost="//debug.talkingdata.com/mi/observatory/",window.resourceHost="https://debug.talkingdata.com/observatory/mi/",window.projesctHost="//debug.talkingdata.com/mi/observatory/"):t.indexOf("mi")!==-1?(this.apiHost="http://mi.talkingdata.com/",window.resourceHost="http://jic2.talkingdata.com/observatory/mi/",window.projesctHost="http://mi.talkingdata.com/"):(this.apiHost="http://172.30.117.200:8081/",window.resourceHost="http://172.30.117.49:8000/src/",window.projesctHost="http://172.30.117.200:8081/")},initConfig:function(){this.getApiHost()},language:{zh:{application:"应用"},en:{application:"Application"}}};return a}),define("index_main",["config","util","loading","search","timeline","appList","appListPic"],function(t){function e(){var t={};t.date=M.currentDate,t.rankType=M.rankType,t.dateType="w",i(),a(),n(t,s,!0)}function i(){$(".app-menu .menu-en").perfectScrollbar(),$(".app-menu .trans").mouseover(function(t){var e=$(this).offset().top;$(this).find("ol").css("top",e-240+"px"),$(this).find("ol").show()}),$(".app-menu .trans").mouseout(function(t){$(this).find("ol").hide()}),$(".app-menu .trans span").click(function(){$(".app-menu .trans").removeClass("active"),$(".app-menu .trans ol li a").removeClass("on-choose"),M.typeId=$(this).attr("td-data"),$(this).parent().addClass("active")}),$(".app-menu .title").click(function(){$(".app-menu .trans").removeClass("active"),$(".app-menu .trans ol li a").removeClass("on-choose"),M.typeId=-1,$(this).addClass("active")}),$(".app-menu .trans ol li a").click(function(){$(".app-menu .trans").removeClass("active"),$(".app-menu .trans ol li a").removeClass("on-choose"),M.typeId=$(this).attr("td-data"),$(this).addClass("on-choose")})}function a(){var t=$(".right-list .tab-title");t.find("span").click(function(){$(this).parent().find("span").removeClass("tab-title-choose"),M.rankType=$(this).attr("td-data"),$(this).addClass("tab-title-choose")})}function n(t,e,i){var a=r.getPromise(m+"app-rank.json",t);a.done(function(t){t&&0!==t.length&&(e(t),i&&r.shareBind(window.location.href,"TalkingData移动观象台","来自TalkingData移动观象台最新数据显示，"+M.currentDate+"日-"+moment(M.currentDate,"YYYY-MM-DD").endOf("week").format("YYYY-MM-DD")+"日 ，Android平台覆盖率排名前三的应用分别为"+t[0].appName+(100*t[0].coverageRate).toFixed(2)+"%，"+t[1].appName+(100*t[1].coverageRate).toFixed(2)+"%，"+t[2].appName+(100*t[2].coverageRate).toFixed(2)+"%，获取更多应用详细排名及行业动态请点击 (相关URL)"))})}function s(t){var e={};e.list=t,e.resourceHost=resourceHost;var i=template(p,e),a=template(u,e);h.html(i),Y.html(a),$(".list-content ul").perfectScrollbar()}var o=t("config"),r=t("util"),c=t("loading").trendLoading(),l=t("search");o.initConfig(),r.nav(curpage),r.shareWeChat(),l.search(".search input",".search .icon-search");var m=o.apiHost,d=t("timeline"),p=t("appList"),u=t("appListPic"),h=$(".list-content ul"),Y=$(".apply-ranking-box .appListPic"),f=window.dateLimit,D=new DepSubscribe,M=ObserverObject({currentDate:f.maxWeek,typeId:-1,rankType:"a"},D);D.on("*",function(t,e,i){h.html(""),Y.html(c);var a={};a.date=M.currentDate,M.typeId!==-1&&(a.typeId=M.typeId),a.rankType=M.rankType,a.dateType=d.dateType,n(a,s)}),d.initTimeLine({dateType:"w",dateLimit:f,language:"ch",status:M}),e()}),seajs.use(["index_main"]);